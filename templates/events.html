{% extends "base.html" %}
{% block content %}

<header id="header">
  <div class="header-bar-top"></div>
  <div class="header-bar-mid"></div>
  <div class="header-bar-bot"></div>
  <h1 class="title">{{ activity.name.title() }}</h1>
  {% include "login-menu.html" %}
  <a href="javascript:void(0)" id="user-account-button" onclick="openUserMenu()">
    <b>☰</b>
  </a>
</header>

<main>
  <!-- user account: start -->
  <section id="side-menu" class="user-account-menu">
    <a href="javascript:void(0)" class="close-button" onclick="closeUserMenu()">&times;</a>

    <div id="account-wrapper">
      <!-- user not logged in -->
      {% if 'username' not in session %}
      <p id="sign-up">See what events are occurring right now</p>
      <a href="{{url_for('user_login')}}" class="login-button">Start looking</a>

      <!-- user logged in -->
      {% elif 'picture' in session %}
      <img class="account-image" src="{{session['picture']}}">
      <nav class="account-actions-container">
        <ul>
          <a href="#"><p class="account-actions">Hosting</p></a>
          <a href="#"><p class="account-actions">Attending</p></a>
          <a href="#"><p class="account-actions">Considering</p></a>
          <a href="#"><p class="account-actions">Settings</p></a>
        </ul>
      </nav>
      <nav class="activity-actions-container">
        <ul>
          <a href="{{url_for('display_activities')}}"><p class="activity-actions">View activities</p></a>
          <a href="{{url_for('make_activity')}}"><p class="activity-actions">New activity</p></a>
          <a href="{{url_for('update_activity', activity_id=activity.id)}}"><p class="activity-actions">Edit activity</p></a>
          <a href="{{url_for('delete_activity', activity_id=activity.id)}}"><p class="activity-actions">Remove activity</p></a>
        </ul>
      </nav>
      <nav class="event-actions-container">
        <ul>
          <a href="#"><p class="event-actions">Plan event</p></a>
          <a href="#"><p class="event-actions">Modify event</p></a>
          <a href="#"><p class="event-actions">Cancel event</p></a>
        </ul>
      </nav>
      {% else %}
      <nav class="account-actions-container">
        <ul>
          <a href="#"><p class="account-actions">Hosting</p></a>
          <a href="#"><p class="account-actions">Attending</p></a>
          <a href="#"><p class="account-actions">Considering</p></a>
          <a href="#"><p class="account-actions">Settings</p></a>
        </ul>
      </nav>
      <nav class="activity-actions-container">
        <ul>
          <a href="{{url_for('display_activities')}}"><p class="activity-actions">View activities</p></a>
          <a href="{{url_for('make_activity')}}"><p class="activity-actions">New activity</p></a>
          <a href="{{url_for('update_activity', activity_id=activity.id)}}"><p class="activity-actions">Edit activity</p></a>
          <a href="{{url_for('delete_activity', activity_id=activity.id)}}"><p class="activity-actions">Remove activity</p></a>
        </ul>
      </nav>
      <nav class="event-actions-container">
        <ul>
          <a href="#"><p class="event-actions">Plan event</p></a>
          <a href="#"><p class="event-actions">Modify event</p></a>
          <a href="#"><p class="event-actions">Cancel event</p></a>
        </ul>
      </nav>
      {% endif %}
    </div>

  </section>
  <!-- user account: end -->

    <div>
      <a href="{{url_for('update_activity', activity_id=activity.id)}}">
        <h1>Update this activity</h1>
      </a>
    </div>

    <div>
      <a href="{{url_for('delete_activity', activity_id=activity.id)}}">
        <h1>Delete this activity</h1>
      </a>
    </div>

    <div>
      <a href="{{url_for('display_activities')}}">
        <h1>Search another activity</h1>
      </a>
    </div>

    <div>
      <a href="{{url_for('make_event', activity_id=activity.id)}}">
        <h1>Create {{ activity.name }} Event</h1>
      </a>
    </div>

    <!-- events list: start -->
    <section id="event-container">
    {% for event in events %}
      {% if loop.first and loop.changed(event.start_date) %}
      <section class="date-wrapper">
        <p class="event-date">{{ event.starting_date_long_form }}</p>
      {% elif loop.changed(event.start_date) %}
      </section>
      <section class="date-wrapper">
        <p class="event-date">{{ event.starting_date_long_form }}</p>
      {% endif %}
        <a href="{{url_for('display_event', activity_id=activity.id, event_id=event.id)}}"
           class="display-event">
          <section class="event-wrapper">
            <div class="event-time">
              <p>{{ event.start_time_12_hour_notation }}–{{ event.end_time_12_hour_notation }}</p>
            </div>
            <div class="event-name">
              <p>{{ event.name }}</p>
            </div>
            <div class="event-description">
              <p>{{ event.description }}</p>
            </div>
          </section>
        </a>
      {% if loop.last %}
      </section>
      {% endif %}
    {% endfor %}
    </section>
    <!-- events list: end -->

</main>

<footer>
</footer>

<script>
  function openUserMenu() {
    document.getElementById("side-menu").style.width = "350px";
  }

  function closeUserMenu() {
    document.getElementById("side-menu").style.width = "0";
  }
</script>

{% endblock %}
